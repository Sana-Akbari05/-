# ثناء اکبری
# جلسه دوم ریزپردازنده و زبان اسمبلی
# کار با LCD و Ultrasonic
**LCD Custom Character Generator**
این مدار برای نمایش دادن کارکتر های  شخصی سازی شده استفاده میشود 
برای ساختن هر کاراکتر یک خانه که معادل یکی 32 خانه ای سی دی است مورد استفاده میشود
هر کدام ازین خانه ها دارای 8 سطر و 5 ستون هستند که با روشن شدن این خانه ها با الگو هایه مشخص میتوان کاراکتر های مختلف را ساخت و مشاهده کرد.
برای استفاده از ای سی دی کتابخانه LiquidCrystal را اعمال کرده. 
سپس ورودی هارا با دستور زیر برای برنامه مشخص میکنیم.
LiquidCristal lcd(13, 2);
برای ساختن کاراکتر ها باید هر سطر و ستون انها را بر اساس الگویی که نیاز است خانه هاروشن یا خاموش باشند به صورت باینری مشخص میکنیم ، برای این کار باید به صورت ماتریسی و با گذاشتن :
0b یا  B 
نوع داده را که اینجا باینری است را مشخص کنیم.
در صورت نیاز به روشن بودن خانه و نمایش مقدار ان را 1 و در غیر این صورت مقدار آن را 0 میدهیم.
برای تعیین باید حتما در  [ ] تعداد ماتریس هارا مشخص کرد که در اینجا 8 است.
پس:[8]
پس از آن وارد حقله void setup میشویم
در انجا با دستور های زیر ال سی دی را انتخاب کرده و بعد به اسم هر کاراکتر مقدار تعلق میدهیم که موقع فراخوانی آن را صدا زده 
    lcd.begin(16, 2); 
    lcd.createChar(0, Heart);

با دستورات زیر ابتدا جایگاهی(خانه ای) که برای کاراکتر دلخواه است را وارد نموده و تابع را به صورت باینری فراخوانی میکنیم.
    lcd.setCursor(0, 1);
    lcd.write(byte(0));
 مشاهده نتیجه:


https://github.com/user-attachments/assets/b75c8c5b-78de-4c48-a253-a79c115ae221


مشاهده شماتیک:
![شماتیک](https://github.com/user-attachments/assets/65e5c621-e20d-454c-b234-9bc87463d633)

مشاهده کد:
**LCD animation**
برای دیدن انیمیشن بر روی ال سی دی باید بتدا کاراکتری را در خانه ای مشخص نمایش داد سپس آن را در خانه دیگری دید و آن را از خانه قبلی پاک کرد.
برای این کار نیاز به حلقه for است و باید بدین صورت باشد که از خانه 0 که همان ستون 1 است شروع کند و تا زمانی که به  خانه 15 که همان ستون 16 است برسد .
انیمیشنی که در این کد تعریف شده طوری به نظر می آید که انگار کرکتر در حال پرش کردن است اما اگر منطقی تر به این نمایش نگاه کنیم در واقع کاراکتر در خانه هایی که ستون زوج دارند در سطر 0 چاپ شده و در خانه هایی که ستون فرد دارند در سطر 1 چاپ شده و قبل از چاپ شدن در خانه بعدی پاک شده.
بدین ترتیب میتوان درون حلقه شرطی گذاشت که اگر شمارنده ستون زوج شد کارکتر را در سطر بالا چاپ کند و آن را چند لحظه نشان دهد و سپس آن را پاک کند؛ در غیر این صورت( در صورت فرد بودن) کارکتر را در سطر پایین نمایش دهد و پس از چند لحظه آن را پاک کند.

مشاهده نمایش:


https://github.com/user-attachments/assets/af45a444-8ff2-472a-adae-197defd152ca


مشاهده شماتیک:
![شماتیک](https://github.com/user-attachments/assets/94500b67-ba43-4404-a412-68a70c253938)

مشاهده کد:


**Ultrasonic**
این ماژول کارایی های زیادی دارد که در این مدار ما از یکی از کاربرد های آن استفاده میکنیم:
یعنی محاسبه فاصله
از  انجایی که این ماژول از امواج فراصوت استفاده میکند و امواج صوت در هر ثانیه سرعتی به اندازه340 متر دارند ، میتوان ازین ویژگی برای تبدیل کردن زمان به فاصه بر اساس سانتی متر استفاده کرد.
فرمول اصلی تبدیل کردن زمان به فاصله :
فاصله = (زمان رفت و برگشت/2) * سرعت صوت 
به این علت که امواج بعد از برخورد به مانع مورد نظر باز میگردند ، باید مدت زمان آن را بر 2 تقسیم کرد(زیرا این زمان شامل  رفت و برگشت امواج است).
برای متوجه شدن زمان برگشت یا به عبارتی همان echo  باید پرچم تعیین کرد تا زمانی که در گرفتن مقدار ورودی متوجه high  شدن echo شویم.
با استفاده از سریال مانیتور میتوان فاصله مورد نظر را بر اساس سانتی متر مشاهده کرد که هر 0.5 ثانیه بروز میشود.
مشاهده نتیجه :


https://github.com/user-attachments/assets/71227bc8-0393-4d08-965e-ca4a68ef5e85



مشاهده شماتیک:
![شماتیک](https://github.com/user-attachments/assets/5f47c7ff-471b-48fe-a127-0d647a26dde8)

مشاهده کد: 

**Project**
برای این مدار همانند مدار قبلی از ماژول التراسونیک استفاده شده و مانند مدار قبلی از مقدار فاصله را به صورت سانتی متر در سریال مانیتور نمایش میدهد با این تفاوت که در این مدار از یک لامپ LED استفاده شده است که از فاصله 30 سانتی متر تا 4 سانتی متر روشن میشود و با زیاد شدن فاصله شدت روشنایی آن کم میشود و با نزدیک شدن جسم به ماژول شدت روشنایی لامپ زیاد میشود.
برای تبدیل فاصله به شدت روشنایی از دستور map استفاده میشود که ابتدا بازه مد نظر برای فاصله و بعد ازن بازه مد نظر برای شدت روشنایی لامپ که از 0 تا 255 است را تعیین میکنیم؛ آن را در یک متغییر ذخیره میکنیم وبه جای high  و low  در دستور analogWrite از آن متغییر استفاده میکنیم.

مشاهده نتیجه:


https://github.com/user-attachments/assets/4cd4083d-2034-4f7f-acf3-dc4705488ec0

مشاهده شماتیک:
![شماتیک](https://github.com/user-attachments/assets/7368a10b-cbe3-48bb-b2e5-3264181a62dd)

مشاهده کد:
